# SpamAssassin MCP Server Environment Configuration Example
#
# Copy this file to .env and customize the values for your deployment.
# This file shows all available configuration options with their default values.

# =============================================================================
# PORT CONFIGURATION
# =============================================================================

# Host port to bind the MCP server (container always uses 8080 internally)
# This is the port you'll connect to from Claude Code
SA_MCP_HOST_PORT=8081

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Logging level: debug, info, warn, error
SA_MCP_LOG_LEVEL=info

# Server bind address (inside container)
SA_MCP_SERVER_BIND_ADDR=0.0.0.0:8080

# Server timeout for requests
SA_MCP_SERVER_TIMEOUT=30s

# =============================================================================
# SPAMASSASSIN CONFIGURATION
# =============================================================================

# SpamAssassin daemon connection settings
SA_MCP_SPAMASSASSIN_HOST=localhost
SA_MCP_SPAMASSASSIN_PORT=783
SA_MCP_SPAMASSASSIN_TIMEOUT=30s

# Spam score threshold (emails with scores above this are considered spam)
SA_MCP_SPAMASSASSIN_THRESHOLD=5.0

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Maximum email size in bytes (10MB = 10485760)
SA_MCP_SECURITY_MAX_EMAIL_SIZE=10485760

# Rate limiting settings
SA_MCP_SECURITY_RATE_LIMITING_REQUESTS_PER_MINUTE=60
SA_MCP_SECURITY_RATE_LIMITING_BURST_SIZE=10

# Scan timeout for individual email analysis
SA_MCP_SECURITY_SCAN_TIMEOUT=60s

# Enable input validation (recommended: true)
SA_MCP_SECURITY_VALIDATION_ENABLED=true

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================

# Update SpamAssassin rules on container startup
# Set to true to download latest rules (requires internet access)
UPDATE_RULES=false

# Force specific transport mode (auto-detected by default)
# Options: stdio, sse, auto
# MCP_TRANSPORT=auto

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Docker container settings (automatically detected, rarely need to change)
# CONTAINER=true
# DOCKER_CONTAINER=true

# Custom SpamAssassin configuration directory
# SA_CONFIG_DIR=/etc/spamassassin-mcp

# =============================================================================
# EXAMPLES FOR DIFFERENT DEPLOYMENTS
# =============================================================================

# Development setup (lower resource limits)
# SA_MCP_HOST_PORT=8080
# SA_MCP_LOG_LEVEL=debug
# SA_MCP_SECURITY_RATE_LIMITING_REQUESTS_PER_MINUTE=30
# UPDATE_RULES=true

# Production setup (higher security)
# SA_MCP_HOST_PORT=8443
# SA_MCP_LOG_LEVEL=warn
# SA_MCP_SECURITY_MAX_EMAIL_SIZE=5242880
# SA_MCP_SECURITY_RATE_LIMITING_REQUESTS_PER_MINUTE=30
# SA_MCP_SECURITY_SCAN_TIMEOUT=30s

# High-volume setup (relaxed limits)
# SA_MCP_SECURITY_RATE_LIMITING_REQUESTS_PER_MINUTE=120
# SA_MCP_SECURITY_RATE_LIMITING_BURST_SIZE=20
# SA_MCP_SECURITY_MAX_EMAIL_SIZE=20971520

# =============================================================================
# NOTES
# =============================================================================
#
# 1. All settings have sensible defaults and the server will work without a .env file
# 2. Only customize values you need to change from defaults
# 3. Restart the container after changing .env: docker compose down && docker compose up -d
# 4. Use .env.local for sensitive overrides (automatically ignored by git)
# 5. Check logs with: docker compose logs -f spamassassin-mcp
# 6. Health check: docker compose exec spamassassin-mcp /usr/local/bin/health-check.sh
#